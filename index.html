<!DOCTYPE html>


<html>
<head>

<title>locationTag</title>

<!-- html configuration -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta charset="utf-8" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> --> 

<!-- phonegap -->
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<!-- Note: phonegap.js or cordova.js is interchangeable (http://docs.build.phonegap.com/en_US/3.1.0/introduction_getting_started.md.html) -->

<!-- Libraries -->
<script type="text/javascript" src="libs/jquery-2.1.3.js"></script>
		
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

<!-- Stylesheets -->
<link type='text/css' rel='stylesheet' href='css/dd.ui.application.css'>

<!-- Script -->
<!--  <script type="text/javascript" src="ts/qb/Application.js"></script> div bsp.: <div id="application" class="open-test-panel"></div> -->
 
 <script>
 
 $( document ).on( "pageinit", "#home", function() {
	  
	 
	    $( document ).on( "swiperight", "#home", function( e ) {
	        // We check if there is no open panel on the page because otherwise
	        // a swipe to close the left panel would also open the right panel (and v.v.).
	        // We do this by checking the data that the framework stores on the page element (panel: open).
	        if ( $.mobile.activePage.jqmData( "panel" ) !== "open" ) {
	            if ( e.type === "swipeleft"  ) {
	               // $( "#right-panel" ).panel( "open" );
	            } else if ( e.type === "swiperight" ) {
	                $( "#mypanel" ).panel( "open" );
	            }
	        }
	    });
	    
	    $("#button1").click( function() {
			
	    	
	    	var onSuccess = function(position) {
	    		
	    		$("#button1").prop('value', position.coords.latitude  + ' ' + position.coords.longitude);
	    		$("#button1").button("refresh");
	    		
	    		
	    		$("#result").append('<a href="http://www.openstreetmap.org/?mlat=' + position.coords.latitude + '&mlon=' + position.coords.longitude + '">'+new Date+'</a><br>');
	    		
	    		
	    		// ios : $("#result").append("<a href='#' onclick='window.open('http://www.openstreetmap.org/', '_system');'>www.openstreetmap.org</a>");
	    		
	    		//$("#result").append("<a href='#' onclick='navigator.app.loadUrl('http://www.openstreetmap.org/', { openExternal:true });'>www.openstreetmap.org</a>");

	    		
	    		
	    		
	    		
	    		//$("#result").append('<a href="http://www.openstreetmap.org/?mlat=' + position.coords.latitude + '&mlon=' + position.coords.longitude + '" target="_new">'+new Date+'</a><br>');
	    		
	    		
	    		
	  			/* alert('Latitude: '          + position.coords.latitude          + '\n' +
	    	          'Longitude: '         + position.coords.longitude         + '\n' +
	    	          'Altitude: '          + position.coords.altitude          + '\n' +
	    	          'Accuracy: '          + position.coords.accuracy          + '\n' +
	    	          'Altitude Accuracy: ' + position.coords.altitudeAccuracy  + '\n' +
	    	          'Heading: '           + position.coords.heading           + '\n' +
	    	          'Speed: '             + position.coords.speed             + '\n' +
	    	          'Timestamp: '         + position.timestamp                + '\n'); */
	    		
	    	};

	    	// onError Callback receives a PositionError object
	    	//
	    	function onError(error) {
	    		
	    		$("#result").append('code: '    + error.code    + '<br>' + 'message: ' + error.message + '<br><br>');
	    		
	    	    
	    	}
	    	
	    	navigator.geolocation.getCurrentPosition(onSuccess, onError,{ enableHighAccuracy: true, maximumAge: 3000, timeout: 120000 }); //zwei minuten timeout
	    	
	    	
	    	//$( "#button1" ).loader( "hide" );
	    	
	    	
	    	
	    	
	    });
	    
	    
	    
	 	// Mock device.platform property if not available
	    if (!window.device) {
	        window.device = { platform: 'Browser' };
	    }
	    
	    handleExternalURLs();
		 
	    
	    
	    
	    
	});
 
 function handleExternalURLs() {
	    // Handle click events for all external URLs
	    if (device.platform.toUpperCase() === 'ANDROID') {
	        $(document).on('click', 'a[href^="http"]', function (e) {
	            var url = $(this).attr('href');
	            navigator.app.loadUrl(url, { openExternal: true });
	            e.preventDefault();
	        });
	    }
	    else if (device.platform.toUpperCase() === 'IOS') {
	        $(document).on('click', 'a[href^="http"]', function (e) {
	            var url = $(this).attr('href');
	            window.open(url, '_system');
	            e.preventDefault();
	        });
	    }
	    else {
	        // Leave standard behaviour
	    }
	}
 
 
 
</script>
 
 
 
 
  
</head> 
<body>
	
	
	
	<div data-role="page" id="home">
		
		<!-- panel -->
		<div data-role="panel" id="mypanel">
	        <!-- panel content goes here -->
	    </div>
		
		<!-- header -->
	    <div data-role="header" data-theme="b" data-position="fixed" data-id="homeheader" id="homeheader">
	      <!--  <a href="#home" data-icon="home" data-iconpos="notext">Home</a> -->
	      <a href="#mypanel" data-icon="grid" data-iconpos="notext">Panel</a>
	      <h1>locationTag</h1>
	    </div>
    	
    	<!-- content -->
    	<div data-role="content">
      		<input id="button1" type="button" data-role="button" data-icon="grid" value="Button">
      		<div id="result"></div>
    	</div>
    	
    	<!-- footer -->
    	<div data-role="footer" data-theme="b" data-position="fixed" data-id="homefooter">
        <!--<div data-role="navbar">
	            <ul>
	                <li><a href="#about">page2</a></li>
	                <li><a href="#about">page3</a></li>
	            </ul>
        	</div> -->
    	</div>
    	
    </div>


</body>
</html>